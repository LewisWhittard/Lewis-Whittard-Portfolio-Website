@using Page_Library.Page.Entities.ContentBlock.Interface
@code {
    [Parameter] public List<IContentBlock> Blocks { get; set; }
    [Parameter] public List<SearchResult>? SearchResults { get; set; }
    [Parameter] public string Title { get; set; }
    [Parameter] public string PublishDate { get; set; }
    [Parameter] public string? SearchResultsHeader { get; set; }
}

<body>
    <section class="page-header">
        <h1>@Title</h1>
        <p class="publish-date">Published on: @PublishDate</p>
    </section>

    @foreach (var block in Blocks)
    {
        switch (block)
        {
            case Page_Library.Page.Entities.ContentBlock.HeaderBlock header:
                <HeaderBlock Block="header" />
                break;

            case Page_Library.Page.Entities.ContentBlock.HyperlinkBlock hyperlink:
                <HyperlinkBlock Block="hyperlink" />
                break;

            case Page_Library.Page.Entities.ContentBlock.ImageBlock image:
                <ImageBlock Block="image" />
                break;

            case Page_Library.Page.Entities.ContentBlock.ParagraphBlock paragraph:
                <ParagraphBlock Block="paragraph" />
                break;

            case Page_Library.Page.Entities.ContentBlock.VideoBlock video:
                <VideoBlock Block="video" />
                break;

            default:
                <p>Unknown block type</p>
                break;
        }
    }

    @if (SearchResultsHeader != null)
    {
    <h2>@SearchResultsHeader</h2>
    }
    
    @if (SearchResults != null && SearchResults.Any())
    {
        <div class="mt-4">
            <h4>Search Results</h4>
            <ul class="list-group">
                @foreach (var result in SearchResults)
                {
                    <component type="typeof(SearchResult)"
                               render-mode="ServerPrerendered"
                               param-Result="result" />
                }
            </ul>
        </div>
    }
</body>